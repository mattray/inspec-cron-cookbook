---
driver:
  name: vagrant

provisioner:
  name: chef_zero
  always_update_cookbooks: true
  deprecations_as_errors: true

verifier:
  name: inspec

platforms:
  - name: centos-7

suites:
  - name: default
    provisioner:
      policyfile: policyfiles/default.rb
    verifier:
      inspec_tests:
        - test/integration/inspec_json
        - test/integration/default
  - name: inspec_json # default inspec.json
    provisioner:
      policyfile: policyfiles/conf.rb
    verifier:
      inspec_tests:
        - test/integration/inspec_json
  - name: inspec_conf # modified inspec.json
    provisioner:
      policyfile: policyfiles/conf.rb
    attributes:
      inspec_cron:
        conf_file: /tmp/inspec/inspec.json
    verifier:
      inspec_tests:
        - test/integration/conf
  - name: targets
    provisioner:
      policyfile: policyfiles/targets.rb
    verifier:
      inspec_tests:
        - test/integration/targets
